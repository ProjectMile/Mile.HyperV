/*
 * PROJECT:   Mouri Internal Library Essentials
 * FILE:      Mile.HyperV.TLFS.Staged.h
 * PURPOSE:   Definition for Hyper-V Top Level Functional Specification 6.0b
 *
 * LICENSE:   The MIT License
 *
 * MAINTAINER: MouriNaruto (Kenji.Mouri@outlook.com)
 */

#ifndef MILE_HYPERV_TLFS_STAGED
#define MILE_HYPERV_TLFS_STAGED

/* Staged (unused) definitions of Mile.HyperV.TLFS */

#include "Mile.HyperV.TLFS.h"

/*
 * Hypervisor Synthetic MSRs
 */

/* TSC emulation after migration */

#define HV_X64_MSR_REENLIGHTENMENT_CONTROL 0x40000106
#define HV_X64_MSR_TSC_EMULATION_CONTROL 0x40000107
#define HV_X64_MSR_TSC_EMULATION_STATUS 0x40000108

/* TSC invariant control */

#define HV_X64_MSR_TSC_INVARIANT_CONTROL 0x40000118

/* Define synthetic interrupt controller model specific registers for nested
   hypervisor */

#define HV_X64_MSR_NESTED_SCONTROL 0x40001080
#define HV_X64_MSR_NESTED_SVERSION 0x40001081
#define HV_X64_MSR_NESTED_SIEFP 0x40001082
#define HV_X64_MSR_NESTED_SIMP 0x40001083
#define HV_X64_MSR_NESTED_EOM 0x40001084
#define HV_X64_MSR_NESTED_SINT0 0x40001090
#define HV_X64_MSR_NESTED_SINT1 0x40001091
#define HV_X64_MSR_NESTED_SINT2 0x40001092
#define HV_X64_MSR_NESTED_SINT3 0x40001093
#define HV_X64_MSR_NESTED_SINT4 0x40001094
#define HV_X64_MSR_NESTED_SINT5 0x40001095
#define HV_X64_MSR_NESTED_SINT6 0x40001096
#define HV_X64_MSR_NESTED_SINT7 0x40001097
#define HV_X64_MSR_NESTED_SINT8 0x40001098
#define HV_X64_MSR_NESTED_SINT9 0x40001099
#define HV_X64_MSR_NESTED_SINT10 0x4000109A
#define HV_X64_MSR_NESTED_SINT11 0x4000109B
#define HV_X64_MSR_NESTED_SINT12 0x4000109C
#define HV_X64_MSR_NESTED_SINT13 0x4000109D
#define HV_X64_MSR_NESTED_SINT14 0x4000109E
#define HV_X64_MSR_NESTED_SINT15 0x4000109F

/*
 * Hypercall Code
 */

/* Defined Hypercall ID in TLFS, but have no detailed definitions */

#define HVCALL_CREATE_PARTITION 0x0040
#define HVCALL_GET_PARTITION_ID 0x0046
#define HVCALL_POST_DEBUG_DATA 0x0069
#define HVCALL_RETRIEVE_DEBUG_DATA 0x006A
#define HVCALL_RESET_DEBUG_SESSION 0x006B
#define HVCALL_GET_SYSTEM_PROPERTY 0x007B

/* Defined Hypercall ID in TLFS, but Parent / Root Partition only */

#define HVCALL_INITIALIZE_PARTITION 0x0041
#define HVCALL_FINALIZE_PARTITION 0x0042
#define HVCALL_DELETE_PARTITION 0x0043
#define HVCALL_GET_PARTITION_PROPERTY 0x0044
#define HVCALL_SET_PARTITION_PROPERTY 0x0045
#define HVCALL_DEPOSIT_MEMORY 0x0048
#define HVCALL_WITHDRAW_MEMORY 0x0049
#define HVCALL_MAP_GPA_PAGES 0x004B
#define HVCALL_UNMAP_GPA_PAGES 0x004C
#define HVCALL_INSTALL_INTERCEPT 0x004D
#define HVCALL_CREATE_VP 0x004E
#define HVCALL_CLEAR_VIRTUAL_INTERRUPT 0x0056
#define HVCALL_DELETE_PORT 0x0058
#define HVCALL_DISCONNECT_PORT 0x005B
#define HVCALL_ADD_LOGICAL_PROCESSOR 0x0076
#define HVCALL_MAP_DEVICE_INTERRUPT 0x007C
#define HVCALL_UNMAP_DEVICE_INTERRUPT 0x007D
#define HVCALL_NOTIFY_PORT_RING_EMPTY 0x008B
#define HVCALL_REGISTER_INTERCEPT_RESULT 0x0091
#define HVCALL_CREATE_PORT 0x0095
#define HVCALL_CONNECT_PORT 0x0096

/* Not even defined Hypercall ID in TLFS */

#define HVCALL_SIGNAL_EVENT_DIRECT 0x00C0
#define HVCALL_POST_MESSAGE_DIRECT 0x00C1
#define HVCALL_DISPATCH_VP 0x00C2
#define HVCALL_GET_GPA_PAGES_ACCESS_STATES 0x00C9
#define HVCALL_MAP_VP_STATE_PAGE 0x00E1
#define HVCALL_UNMAP_VP_STATE_PAGE 0x00E2
#define HVCALL_GET_VP_STATE 0x00E3
#define HVCALL_SET_VP_STATE 0x00E4
#define HVCALL_GET_VP_CPUID_VALUES 0x00F4

#endif /* !MILE_HYPERV_TLFS_STAGED */
